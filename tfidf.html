<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COMPSS 211 - TF-IDF Tutorial</title>
<style>
  :root{
    --bg:#ffffff;
    --panel:#f8f9fa;
    --muted:#6c757d;
    --text:#212529;
    --blue:#0d6efd;
    --indigo:#6610f2;
    --emerald:#198754;
    --orange:#fd7e14;
    --border:#dee2e6;
    --red:#dc3545;
    --yellow:#ffc107;
    --purple:#6f42c1;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    background:var(--bg); color:var(--text);
    line-height: 1.6; min-height: 100vh; padding: 20px;
  }
  .wrap{max-width:1200px;margin:32px auto;padding:0 20px}
  .container{
    background: white; border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1); padding: 40px;
  }
        
  .course-header{text-align:center;margin-bottom:20px;padding:16px;background:var(--panel);border-radius:12px;border:1px solid var(--border)}
  .course-title{font-size:1.2em;color:var(--blue);margin:0;font-weight:600}
  h1{font-size:32px;margin:0 0 12px; text-align: center;}
  p.lead{color:var(--muted);margin:0 0 24px; font-size: 18px; text-align: center;}
  .intro{
    background:var(--panel); border:1px solid var(--border); border-radius:16px; padding:24px;
    margin-bottom: 24px; box-shadow:0 2px 8px rgba(0,0,0,.1);
  }
  .intro h2{margin:0 0 12px; color:var(--blue);}
  .intro p{margin:12px 0; font-size: 16px;}
  .stage{
    border:1px solid var(--border); border-radius:16px; padding:24px; 
    background:var(--bg); margin-bottom:24px;
    box-shadow:0 2px 8px rgba(0,0,0,.1);
  }
  .stage h2{margin:0 0 12px; font-size:20px; color:var(--blue);}
  .stage .explanation{
    font-size:15px; color:var(--text); margin-bottom:16px; 
    background:rgba(13,110,253,.08); padding:12px 16px; border-radius:12px;
    border-left: 4px solid var(--blue);
  }
  .documents-section{margin-bottom: 40px;}
  .document{
    background: var(--panel); padding: 15px; margin-bottom: 15px;
    border-radius: 8px; border: 2px solid var(--border); transition: all 0.3s;
  }
        
  .document.highlight{border-color: var(--blue); background: rgba(13,110,253,.1);}
  .doc-title{font-weight: bold; color: var(--text); margin-bottom: 5px;}
  .doc-content{color: var(--text);}
  .word-highlight{background: var(--yellow); padding: 2px 4px; border-radius: 3px; font-weight: bold;}
  .controls-section{
    background: var(--panel); padding: 25px; border-radius: 16px;
    margin-bottom: 30px; border: 1px solid var(--border);
  }
  .control-group{margin-bottom: 25px;}
  .control-label{font-weight: bold; display: block; margin-bottom: 8px; color: var(--text);}
  select, input[type=range], input[type=number]{
    width:100%; background:var(--bg); border:1px solid var(--border); color:var(--text);
    border-radius:10px; padding:10px; outline:none; font-size: 14px; cursor: pointer;
  }
  select:focus{outline: none; border-color: var(--blue);}
  .calculations-section{display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;}
  .calc-card{
    background: var(--panel); border: 1px solid var(--border); border-radius: 16px; padding: 20px;
    transition: transform 0.3s, box-shadow 0.3s; box-shadow:0 2px 8px rgba(0,0,0,.1);
  }
  .calc-card:hover{transform: translateY(-2px); box-shadow: 0 4px 16px rgba(0,0,0,0.15);}
  .calc-title{font-size: 1.1em; font-weight: 600; color: var(--blue); margin-bottom: 10px;}
  .calc-formula{
    background: var(--panel); padding: 10px; border-radius: 8px; border: 1px solid var(--border);
    font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas; margin-bottom: 10px; font-size: 0.9em;
  }
  .calc-value{font-size: 2em; font-weight: bold; color: var(--text); text-align: center; margin-top: 15px;}
  .calc-explanation{color: var(--muted); font-size: 0.9em; margin-top: 10px;}
  .results-table{width: 100%; border-collapse: collapse; margin-top: 20px;}
  .results-table th, .results-table td{padding: 12px; text-align: left; border-bottom: 1px solid var(--border);}
  .results-table th{background: var(--blue); color: white; font-weight: bold;}
  .results-table tr:hover{background: var(--panel);}
  .explanation-box{
    background: rgba(255,193,7,.1); border: 1px solid var(--yellow);
    border-radius: 12px; padding: 20px; margin-top: 30px;
  }
  .explanation-box h3{color: var(--orange); margin-bottom: 10px;}
  .formula-breakdown{background: var(--bg); padding: 15px; border-radius: 8px; margin-top: 10px; border: 1px solid var(--border);}
  .btn{
    display: inline-flex; align-items: center; gap: 8px; padding: 10px 14px;
    border-radius: 12px; border: 1px solid var(--border); background: var(--bg);
    color: var(--text); cursor: pointer; font-size: 14px; margin: 4px;
    transition: all 0.3s ease; text-decoration: none;
  }
  .btn:hover{background: var(--panel); transform: translateY(-1px);}
  .btn-primary{background: var(--blue); color: white; border-color: var(--blue);}
  .btn-primary:hover{background: #0b5ed7; border-color: #0b5ed7;}
  @media (max-width: 768px) {
    .container{padding: 20px;}
    h1{font-size: 1.8em;}
    .calculations-section{grid-template-columns: 1fr;}
  }
    </style>
</head>
<body>
  <div class="wrap">
    <div class="container">
        <div class="course-header">
            <div class="course-title">COMPSS 211 - Advanced Computing</div>
        </div>
        <h1>Understanding TF-IDF</h1>
        <p class="lead">Term Frequency - Inverse Document Frequency Explained</p>
        
        <div class="intro">
            <p><strong>TF-IDF</strong> is a numerical statistic that reflects how important a word is to a document within a collection of documents. It increases proportionally to the number of times a word appears in a document but is offset by the frequency of the word in the corpus, which helps to adjust for the fact that some words appear more frequently in general.</p>
            <button class="btn btn-primary" onclick="showDocuments()" style="margin-top: 15px;">Next: See Document Collection â†’</button>
        </div>
        
        <div class="documents-section" id="documents-stage" style="display: none;">
            <h2>Sample Document Collection</h2>
            <p style="margin-bottom: 15px; color: #666;">Here's our small corpus of three documents. Select a word below to see how TF-IDF is calculated.</p>
            
            <div class="document" id="doc1">
                <div class="doc-title">Document 1: Technology</div>
                <div class="doc-content">The computer processes data quickly. Computer systems are essential.</div>
            </div>
            
            <div class="document" id="doc2">
                <div class="doc-title">Document 2: Nature</div>
                <div class="doc-content">The forest has many trees. Trees provide oxygen to the environment.</div>
            </div>
            
            <div class="document" id="doc3">
                <div class="doc-title">Document 3: Mixed</div>
                <div class="doc-content">The computer helps analyze forest data. Systems monitor tree growth.</div>
            </div>
            <button class="btn btn-primary" onclick="showCalculator()" style="margin-top: 20px;">Next: Try the Calculator â†’</button>
        </div>
        
        <div class="controls-section" id="calculator-stage" style="display: none;">
            <div class="control-group">
                <label class="control-label" for="wordSelect">ðŸ”¤ Select a word to analyze:</label>
                <select id="wordSelect">
                    <option value="">Choose a word...</option>
                    <option value="computer">computer</option>
                    <option value="the">the</option>
                    <option value="forest">forest</option>
                    <option value="data">data</option>
                    <option value="trees">trees</option>
                    <option value="systems">systems</option>
                </select>
            </div>
            
            <div class="control-group">
                <label class="control-label" for="docSelect">ðŸ“„ Select a document:</label>
                <select id="docSelect">
                    <option value="1">Document 1: Technology</option>
                    <option value="2">Document 2: Nature</option>
                    <option value="3">Document 3: Mixed</option>
                </select>
            </div>
        </div>
        
        <div class="calculations-section" id="calculations" style="display: none;">
            <div class="calc-card">
                <div class="calc-title">ðŸ“Š Term Frequency (TF)</div>
                <div class="calc-formula">TF = (Count of term in doc) / (Total terms in doc)</div>
                <div class="calc-value" id="tfValue">0</div>
                <div class="calc-explanation" id="tfExplanation"></div>
            </div>
            
            <div class="calc-card">
                <div class="calc-title">ðŸ“ˆ Inverse Document Frequency (IDF)</div>
                <div class="calc-formula">IDF = log(Total docs / Docs with term)</div>
                <div class="calc-value" id="idfValue">0</div>
                <div class="calc-explanation" id="idfExplanation"></div>
            </div>
            
            <div class="calc-card">
                <div class="calc-title">ðŸŽ¯ TF-IDF Score</div>
                <div class="calc-formula">TF-IDF = TF Ã— IDF</div>
                <div class="calc-value" id="tfidfValue" style="color: #764ba2;">0</div>
                <div class="calc-explanation">Final importance score for this term in this document</div>
            </div>
        </div>
        
        <div id="comparisonTable" style="display: none;">
            <h3 style="margin-bottom: 15px; color: var(--blue);">ðŸ“‹ TF-IDF Scores Across All Documents</h3>
            <table class="results-table">
                <thead>
                    <tr>
                        <th>Document</th>
                        <th>Term Count</th>
                        <th>Term Frequency</th>
                        <th>TF-IDF Score</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                </tbody>
            </table>
        </div>
        
        <div class="explanation-box" id="explanation" style="display: none;">
            <h3>What's Happening?</h3>
            <div id="dynamicExplanation"></div>
            
            <div class="formula-breakdown">
                <strong>Key Insights:</strong>
                <ul style="margin-top: 10px; margin-left: 20px;">
                    <li>Words that appear frequently in a specific document get higher TF scores</li>
                    <li>Words that appear in many documents get lower IDF scores</li>
                    <li>Common words like "the" have low TF-IDF scores because they appear everywhere</li>
                    <li>Unique, document-specific words have high TF-IDF scores</li>
                </ul>
            </div>
            <button class="btn btn-primary" onclick="showSummarySection()" style="margin-top: 20px;">Next: See Summary â†’</button>
        </div>
        
        <div class="intro" id="summary-stage" style="display: none;">
            <h2>Summary</h2>
            <p>You've now experienced the complete TF-IDF calculation process through interactive exploration:</p>
            <ul style="margin: 12px 0; padding-left: 20px;">
                <li><strong>Term Frequency (TF)</strong>: Measures how often a word appears in a specific document</li>
                <li><strong>Inverse Document Frequency (IDF)</strong>: Measures how unique a word is across all documents</li>
                <li><strong>TF-IDF Score</strong>: Combines both metrics to identify the most important words for each document</li>
                <li><strong>Practical applications</strong>: Used in search engines, document classification, and text analysis</li>
            </ul>
            
            <div class="goal">
                <h3>Next Steps</h3>
                <p>Try experimenting with different document collections and see how TF-IDF adapts to different types of content. This foundation is crucial for understanding modern text analysis and machine learning!</p>
            </div>
        </div>
    </div>
  </div>
    
    <script>
        // Document data
        const documents = {
            1: {
                title: "Technology",
                content: "The computer processes data quickly. Computer systems are essential.",
                words: ["the", "computer", "processes", "data", "quickly", "computer", "systems", "are", "essential"]
            },
            2: {
                title: "Nature", 
                content: "The forest has many trees. Trees provide oxygen to the environment.",
                words: ["the", "forest", "has", "many", "trees", "trees", "provide", "oxygen", "to", "the", "environment"]
            },
            3: {
                title: "Mixed",
                content: "The computer helps analyze forest data. Systems monitor tree growth.",
                words: ["the", "computer", "helps", "analyze", "forest", "data", "systems", "monitor", "tree", "growth"]
            }
        };
        
        function countTermInDoc(term, docId) {
            const normalizedTerm = term.toLowerCase();
            return documents[docId].words.filter(word => 
                word.toLowerCase() === normalizedTerm || 
                word.toLowerCase() === normalizedTerm + 's' ||
                normalizedTerm === word.toLowerCase() + 's'
            ).length;
        }
        
        function calculateTF(term, docId) {
            const count = countTermInDoc(term, docId);
            const total = documents[docId].words.length;
            return count / total;
        }
        
        function calculateIDF(term) {
            const totalDocs = Object.keys(documents).length;
            let docsWithTerm = 0;
            
            for (let docId in documents) {
                if (countTermInDoc(term, docId) > 0) {
                    docsWithTerm++;
                }
            }
            
            return Math.log10(totalDocs / docsWithTerm);
        }
        
        function highlightWords() {
            const selectedWord = document.getElementById('wordSelect').value;
            const selectedDoc = document.getElementById('docSelect').value;
            
            // Reset all documents
            for (let i = 1; i <= 3; i++) {
                const docElement = document.getElementById(`doc${i}`);
                const docData = documents[i];
                docElement.classList.remove('highlight');
                docElement.querySelector('.doc-content').innerHTML = docData.content;
            }
            
            if (!selectedWord) return;
            
            // Highlight selected document
            document.getElementById(`doc${selectedDoc}`).classList.add('highlight');
            
            // Highlight the word in all documents
            for (let i = 1; i <= 3; i++) {
                const docElement = document.getElementById(`doc${i}`);
                let content = documents[i].content;
                
                // Create regex to match the word (case-insensitive)
                const regex = new RegExp(`\\b(${selectedWord}s?|${selectedWord.slice(0, -1)}s?)\\b`, 'gi');
                content = content.replace(regex, '<span class="word-highlight">$1</span>');
                
                docElement.querySelector('.doc-content').innerHTML = content;
            }
        }
        
        function updateCalculations() {
            const selectedWord = document.getElementById('wordSelect').value;
            const selectedDoc = document.getElementById('docSelect').value;
            
            if (!selectedWord) {
                document.getElementById('calculations').style.display = 'none';
                document.getElementById('comparisonTable').style.display = 'none';
                document.getElementById('explanation').style.display = 'none';
                return;
            }
            
            // Calculate values
            const tf = calculateTF(selectedWord, selectedDoc);
            const idf = calculateIDF(selectedWord);
            const tfidf = tf * idf;
            
            const termCount = countTermInDoc(selectedWord, selectedDoc);
            const totalTerms = documents[selectedDoc].words.length;
            
            // Update TF display
            document.getElementById('tfValue').textContent = tf.toFixed(4);
            document.getElementById('tfExplanation').textContent = 
                `"${selectedWord}" appears ${termCount} time(s) out of ${totalTerms} total words`;
            
            // Update IDF display
            let docsWithTerm = 0;
            for (let docId in documents) {
                if (countTermInDoc(selectedWord, docId) > 0) docsWithTerm++;
            }
            document.getElementById('idfValue').textContent = idf.toFixed(4);
            document.getElementById('idfExplanation').textContent = 
                `Appears in ${docsWithTerm} out of 3 documents`;
            
            // Update TF-IDF display
            document.getElementById('tfidfValue').textContent = tfidf.toFixed(4);
            
            // Show calculations
            document.getElementById('calculations').style.display = 'grid';
            
            // Update comparison table
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';
            
            for (let docId in documents) {
                const row = tableBody.insertRow();
                const docTF = calculateTF(selectedWord, docId);
                const docTFIDF = docTF * idf;
                const docTermCount = countTermInDoc(selectedWord, docId);
                
                row.insertCell(0).textContent = `Document ${docId}: ${documents[docId].title}`;
                row.insertCell(1).textContent = docTermCount;
                row.insertCell(2).textContent = docTF.toFixed(4);
                row.insertCell(3).textContent = docTFIDF.toFixed(4);
                
                if (docId == selectedDoc) {
                    row.style.background = '#f0f0ff';
                    row.style.fontWeight = 'bold';
                }
            }
            
            document.getElementById('comparisonTable').style.display = 'block';
            
            // Update explanation
            let explanationText = '';
            if (selectedWord === 'the') {
                explanationText = `The word "${selectedWord}" is a common word that appears in all documents. Notice how it has a low IDF score (${idf.toFixed(3)}) because it appears everywhere. This makes its TF-IDF score low, correctly identifying it as not very informative for distinguishing between documents.`;
            } else if (docsWithTerm === 1) {
                explanationText = `The word "${selectedWord}" appears in only one document, giving it a high IDF score (${idf.toFixed(3)}). This makes it highly distinctive and valuable for characterizing that specific document.`;
            } else {
                explanationText = `The word "${selectedWord}" appears in ${docsWithTerm} out of 3 documents. Its IDF score (${idf.toFixed(3)}) reflects this distribution. The TF-IDF score balances how often it appears in the selected document against how common it is across all documents.`;
            }
            
            document.getElementById('dynamicExplanation').textContent = explanationText;
            document.getElementById('explanation').style.display = 'block';
        }
        
        // Navigation functions for progressive disclosure
        function showDocuments() {
            document.getElementById('documents-stage').style.display = 'block';
            document.getElementById('documents-stage').scrollIntoView({ behavior: 'smooth' });
        }
        
        function showCalculator() {
            document.getElementById('calculator-stage').style.display = 'block';
            document.getElementById('calculator-stage').scrollIntoView({ behavior: 'smooth' });
        }
        
        function showSummarySection() {
            document.getElementById('summary-stage').style.display = 'block';
            document.getElementById('summary-stage').scrollIntoView({ behavior: 'smooth' });
        }
        
        // Event listeners
        document.getElementById('wordSelect').addEventListener('change', () => {
            highlightWords();
            updateCalculations();
        });
        
        document.getElementById('docSelect').addEventListener('change', () => {
            highlightWords();
            updateCalculations();
        });
        
        // Initialize
        highlightWords();
    </script>
</body>
</html>